{% extends '::base.html.twig' %}

{% block title %} {{ parent() }} - Accueil{% endblock %}

{% block body %}
	<h1>Bienvenue {{ app.user|title}}</h1>

	<div class="row" id="updates">
		{% if app.user.setting.hasRpg %}
			<div id="rpg" class="hide-for-small medium-6  columns home-block">
				<div class="card">
					<h3>Mon perso</h3>
					{% include 'UrbicandeHomeBundle:Home:rpg.html.twig' with {'user': app.user} %}
				</div>
			</div>
			<div class="hide-for-small medium-6 columns home-block">
				<div class="card">
					<h3>Les dernières actions</h3>
					{% include 'UrbicandeHomeBundle:Home:logList.html.twig' %}
				</div>
			</div>
		{% else %}
			<div class="hide-for-small medium-12 columns home-block">
				<div class="card">
					<h3>Les dernières actions</h3>
					{% include 'UrbicandeHomeBundle:Home:logList.html.twig' %}
				</div>
			</div>
		{% endif %}
	</div>

	<div class="row" id="my-objects" data-equalizer>
		<div class="small-12 medium-6 xlarge-3 columns">
			<div id="my-plot" class="card" data-equalizer-watch>
				<div class="header row">
					<h3 class="small-6 medium-7 large-9 columns">
						Mes intrigues
					</h3>
					<div class="small-6 medium-5 large-3 columns">
						<a class="button flat blue"  href="{{ path('create_intrigue') }}">
							Créer
						</a>
					</div>
				</div>
				<ul class="no-bullet">
					{% for intrigue in app.user.intrigues %}
						<li><a href="{{ path('intrigue_by_id', {'id': intrigue.id}) }}">{{ intrigue }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>

		<div class="small-12 medium-6 xlarge-3 columns">
			<div class="card" id="my-player" data-equalizer-watch>
				<div class="header row">
					<h3 class="small-6 medium-7 large-9 columns">
						Mes personnages
					</h3>
					<div class="small-6 medium-5 large-3 columns">
						<a class="button flat blue" href="{{ path('create_perso') }}">
							Créer
						</a>
					</div>
				</div>
				<ul class="no-bullet">
					{% for perso in app.user.persos %}
						<li><a href="{{ path('perso_by_id', {'id': perso.id}) }}">{{ perso }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>

		<div class="small-12 medium-6 xlarge-3 columns">
			<div class="card" id="my-groups" data-equalizer-watch>
				<div class="header row">
					<h3 class="small-6 medium-7 large-9 columns">
						Mes groupes
					</h3>
					<div class="small-6 medium-5 large-3 columns">
						<a class="button flat blue" href="{{ path('create_groupe') }}">
							Créer
						</a>
					</div>
				</div>
				<ul class="no-bullet">
					{% for groupe in app.user.groupes %}
						<li><a href="{{ path('groupe_by_id', {'id': groupe.id}) }}">{{ groupe }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>

		<div class="small-12 medium-6 xlarge-3 columns">
			<div class="card" id="my-rules" data-equalizer-watch>
				<div class="header row">
					<h3 class="small-6 medium-7 large-9 columns">
						Mes règles
					</h3>
					<div class="small-6 medium-5 large-3 columns">
						<a class="button flat blue" href="{{ path('create_rule') }}">
							Créer
						</a>
					</div>
				</div>
				<ul class="no-bullet">
					{% for rule in app.user.rules %}
						<li><a href="{{ path('rule_by_id', {'id': rule.id}) }}">{{ rule }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>

		<div class="small-12 medium-6 xlarge-3 columns">
			<div class="card" id="my-skills" data-equalizer-watch>
				<div class="header row">
					<h3 class="small-6 medium-7 large-9 columns">
						Mes compétences
					</h3>
					<div class="small-6 medium-5 large-3 columns">
						<a class="button flat blue" href="{{ path('create_skill') }}">
							Créer
						</a>
					</div>
				</div>
				<ul class="no-bullet">
					{% for skill in app.user.skills %}
						<li><a href="{{ path('skill_by_id', {'id': skill.id}) }}">{{ skill }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>

		<div class="small-12 medium-6 xlarge-3 columns end">
			<div class="card" id="my-tasks" data-equalizer-watch>
				<div class="header row">
					<h3 class="small-6 medium-7 large-9 columns">
						Mes taches
					</h3>
					<div class="small-6 medium-5 large-3 columns">
						<a class="button flat blue" href="#" data-reveal-id="task" onclick="event.preventDefault();">
							Créer
						</a>
					</div>
				</div>
				<ul class="no-bullet">
					{% for task in app.user.tasks %}
						<li><a href="#">{% if task.isDone == false %}<i class="fa fa-square-o"></i>{% else %}<i class="fa fa-check-square"></i>{% endif %} {{ task }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>

                <div id="task" class="row reveal-modal task-modal" data-reveal="true">
                        <h3 class="small-12 column title">Nouvelle tache</h3>

                        <div class="small-12 column">
                                <div class="row">
                                	<div class="small-12 medium-4 column">
                                		{{ form_row(taskForm.writer)}}
                                	</div>
                                	<div class="small-12 medium-4 column">
                                		{{ form_row(taskForm.text)}}
                                	</div>
                                	<div class="small-12 medium-4 column">
                                		{{ form_row(taskForm.endDate)}}
                                	</div>
                                </div>
                        </div>

                        <a href="#" class="flat button green hide-for-print small-12 medium-3 large-2" onclick="event.preventDefault();createTask('{{path('create_task')}}')">Créer</a>
                        <a class="close-reveal-modal modal-dismiss hide-for-print"><i class="fa fa-minus"></i></a>
                </div>
	</div>
{% endblock %}
